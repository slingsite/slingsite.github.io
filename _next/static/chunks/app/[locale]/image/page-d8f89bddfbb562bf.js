(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{2170:(e,t,s)=>{"use strict";s.d(t,{default:()=>W});var r=s(5155),a=s(2115);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:h,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:s,strokeWidth:o?24*Number(l)/Number(r):l,className:i("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:n,...c}=s;return(0,a.createElement)(o,{ref:r,iconNode:t,className:i("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...c})});return s.displayName=l(e),s},d=c("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]),h=e=>{let{onFilesAdded:t}=e,[s,l]=(0,a.useState)(!1),i=(0,a.useRef)(null),n=e=>{e.preventDefault(),e.stopPropagation(),l("dragenter"===e.type||"dragover"===e.type)};return(0,r.jsxs)("div",{onDragEnter:n,onDragOver:n,onDragLeave:n,onDrop:e=>{var s;e.preventDefault(),e.stopPropagation(),l(!1),(null==(s=e.dataTransfer.files)?void 0:s.length)&&(t(Array.from(e.dataTransfer.files)),e.dataTransfer.clearData())},className:"border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 ".concat(s?"border-blue-500 bg-blue-50":"border-gray-300 bg-white hover:border-blue-400"),children:[(0,r.jsx)("input",{ref:i,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:e=>{var s;(null==(s=e.target.files)?void 0:s.length)&&t(Array.from(e.target.files))}}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,r.jsxs)("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center",children:[" ",(0,r.jsx)(d,{className:"w-8 h-8 transition-colors duration-300 ".concat(s?"text-blue-600":"text-gray-500")})," "]}),(0,r.jsxs)("p",{className:"text-gray-600",children:[" ",(0,r.jsx)("span",{className:"font-semibold text-blue-600 cursor-pointer",onClick:()=>{if(i.current)i.current.click();else throw Error("fileInputRef.current is not defined")},children:"Click to upload"})," or drag and drop "]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Supports JPG, PNG, WEBP, GIF"})]})]})},m=e=>{for(let[t,s]of Object.entries(e.tasks))for(let[e,r]of Object.entries(s))if("waiting"===r.status)return[t,e]},x=e=>Object.values(e.tasks).flatMap(e=>Object.values(e)),p=e=>{let t=x(e),s=t.length;if(0===s)return 1;let r=t.filter(e=>"completed"===e.status||"errored"===e.status).length;return r>=s?1:r/s},u=c("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),g=c("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),b=c("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),y=c("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),f=c("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),j=e=>{let{children:t,onClick:s,disabled:a}=e;return(0,r.jsx)("button",{onClick:s,disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center text-sm font-semibold ",children:t})},v=e=>{let{children:t,onClick:s,disabled:a,small:l}=e;return(0,r.jsx)("button",{onClick:s,disabled:a,className:"bg-gray-200 text-gray-700 px-".concat(l?2:4," py-").concat(l?1:2," rounded-md hover:bg-gray-300 transition-colors flex items-center justify-center text-").concat(l?"xs":"sm"),children:t})},w=e=>{let{onRemove:t,onDownloadAll:s,onDownloadOne:a,job:l}=e,{originalFile:i,tasks:n}=l,o=p(l),c="".concat(Math.round(100*o),"%"),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB"][s]};return(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center min-w-0",children:[(0,r.jsx)("img",{src:URL.createObjectURL(i),className:"w-10 h-10 object-cover rounded-md mr-3 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate",title:i.name,children:i.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 flex items-center flex-wrap",children:[(0,r.jsxs)("span",{children:[l.originalDimensions.width,"x",l.originalDimensions.height,"px"]}),(0,r.jsx)("span",{className:"mx-1.5",children:"\xb7"}),(0,r.jsx)("span",{children:d(i.size)})]})]})]}),(0,r.jsxs)("button",{onClick:t,className:"p-1 rounded-full hover:bg-gray-100 text-gray-500 hover:text-gray-700",children:[" ",(0,r.jsx)(b,{className:"w-4 h-4"})," "]})]}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Compressed Files:"}),1===o&&(0,r.jsxs)(v,{onClick:()=>s(),small:!0,children:[" ",(0,r.jsx)(y,{className:"w-3 h-3 mr-1"})," Download All "]})]}),(0,r.jsx)("div",{className:"space-y-2",children:Object.entries(n).map(e=>{var t,s;let[i,n]=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-xs font-bold text-gray-500 capitalize mb-1 flex items-center",children:[i,(0,r.jsxs)("span",{className:"ml-2 font-normal text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded-full text-[10px]",children:[null==(t=l.requestedDimensions[i])?void 0:t.width,"x",null==(s=l.requestedDimensions[i])?void 0:s.height]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(n).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between bg-gray-100 rounded-md py-1 px-2 flex-grow text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u,{className:"w-3 h-3 mr-1.5 text-gray-500"}),(0,r.jsx)("span",{className:"font-mono uppercase",children:t}),"waiting"===s.status&&(0,r.jsx)("span",{className:"text-gray-500 ml-2",children:"Waiting"}),"running"===s.status&&(0,r.jsx)("span",{className:"text-gray-500 ml-2",children:"Running"}),"errored"===s.status&&(0,r.jsx)("span",{className:"text-red-200 ml-2",children:"Error"}),"completed"===s.status&&(0,r.jsx)("span",{className:"text-gray-500 ml-2",children:d(s.result.size)})]}),"completed"===s.status&&(0,r.jsx)("button",{onClick:()=>a(i,t),className:"p-0.5 rounded hover:bg-gray-200 text-gray-600",children:(0,r.jsx)(g,{className:"w-3 h-3"})})]},t)})})]},i)})})]}),x(l).some(e=>"running"===e.status)?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:[" ",(0,r.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:c}})," "]}),(0,r.jsxs)("p",{className:"text-xs text-center text-gray-600 mt-1",children:["Compressing... ",c]})]}):0===o&&(0,r.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-500 flex items-center justify-center bg-gray-100 p-2 rounded-md",children:[(0,r.jsx)(f,{className:"w-4 h-4 mr-2"})," In queue..."]})]})]})},N=(e,t,s)=>{var r;let a=null==(r=e.tasks[t])?void 0:r[s];if(a&&"completed"===a.status){let e=URL.createObjectURL(a.result),r=document.createElement("a");r.href=e,r.download=function(e,t,s){let r=e.split(".");return r[r.length-2]=r[r.length-2]+"-compressed-"+t,r[r.length-1]=s,r.join(".")}(a.result.name,t,s),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)}},k=e=>{e.forEach(e=>{Object.entries(e.tasks).forEach(t=>{let[s,r]=t;Object.entries(r).forEach(t=>{let[r]=t;N(e,s,r)})})})},C=e=>{let{jobs:t,handleRemoveJob:s}=e;return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 min-h-[200px]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Your Files"}),(0,r.jsxs)(j,{onClick:()=>k(t),disabled:!t.some(e=>p(e)>0),children:[" ",(0,r.jsx)(y,{className:"w-4 h-4 mr-2"})," Download All Files "]})]}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-10 text-gray-500",children:[" ",(0,r.jsx)("p",{children:"Upload some files to get started!"})," "]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((e,t)=>(0,r.jsx)(w,{onRemove:()=>s(t),onDownloadOne:(t,s)=>N(e,t,s),onDownloadAll:()=>k([e]),job:e},e.id))})]})},z=c("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),_=c("tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),M=c("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),E=c("files",[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]]),S=c("file-plus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]),R=c("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),q=c("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),L=e=>e<=0?100:100/e,O={width:"Image Width",height:"Image Height",percentage:"Layout"},A=e=>{let{config:t,setConfig:s,readyToCompress:a,handleCompressClick:l,files:i,handleRemoveFile:n,handleExitSettings:o}=e,c={mobile:(0,r.jsx)(z,{className:"w-5 h-5 mr-2"}),tablet:(0,r.jsx)(_,{className:"w-5 h-5 mr-2"}),desktop:(0,r.jsx)(M,{className:"w-5 h-5 mr-2"})},d=[{label:"1",columns:1},{label:"1/2",columns:2},{label:"1/3",columns:3},{label:"1/4",columns:4}],h=(e,t)=>{s(s=>{let r={...s},a={...r[e],sizingType:t};return r[e]=a,r})},m=(e,t,r)=>{s(s=>{let a={...s},l={...a[e],[t]:r};return"width"===t&&(l.width=r,l.percentage=100*r/l.screenWidth),"percentage"===t&&(l.percentage=r,l.width=l.screenWidth*r/100),"screenWidth"===t&&(l.screenWidth=r,l.width=l.screenWidth*l.percentage/100),"height"===t&&(l.height=r),a[e]=l,a})};return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[" ",(0,r.jsx)(E,{className:"w-6 h-6 text-gray-600 mr-3"})," ",(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Files to Compress"})," "]}),(0,r.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-4",children:i.map((e,t)=>(0,r.jsxs)("div",{className:"relative group aspect-square",children:[(0,r.jsx)("img",{src:URL.createObjectURL(e),className:"w-full h-full object-cover rounded-md shadow-sm"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-color duration-200 rounded-md"}),(0,r.jsx)("button",{onClick:()=>n(t),className:"absolute top-1 right-1 bg-white/70 hover:bg-white text-gray-800 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200","aria-label":"Remove image",children:(0,r.jsx)(b,{className:"w-4 h-4"})})]},e.name))}),(0,r.jsx)("div",{className:"flex justify-end items-center mb-4",children:(0,r.jsxs)(v,{onClick:o,children:[(0,r.jsx)(S,{className:"w-4 h-4 mr-2"}),"Add More Files"]})}),(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[" ",(0,r.jsx)(R,{className:"w-6 h-6 text-gray-600 mr-3"})," ",(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Compression Settings"})," "]}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-4",children:Object.keys(t).map(e=>(0,r.jsxs)("div",{className:"rounded-lg transition-all duration-300 ".concat(t[e].enabled?"bg-gray-50 ring-2 ring-blue-200":"bg-gray-100 opacity-70"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,r.jsxs)("div",{className:"flex items-center font-semibold text-gray-700 capitalize",children:[" ",c[e]," ",e," "]}),(0,r.jsxs)("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[" ",(0,r.jsx)("input",{type:"checkbox",id:e,checked:t[e].enabled,onChange:()=>(e=>{s(t=>{let s={...t};return s[e]={...s[e],enabled:!s[e].enabled},s})})(e),className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"})," ",(0,r.jsx)("label",{htmlFor:e,className:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"})," "]})]}),(0,r.jsx)("div",{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(t[e].enabled?"max-h-[500px]":"max-h-0"),children:(0,r.jsxs)("div",{className:"px-4 pb-4 space-y-4",children:["percentage"===t[e].sizingType&&(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Screen Width"})," ",(0,r.jsxs)("div",{className:"relative mt-1",children:[" ",(0,r.jsx)("input",{type:"number",value:t[e].screenWidth,onChange:t=>m(e,"screenWidth",parseFloat(t.target.value)),className:"w-full pl-3 pr-10 py-2 text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})," ",(0,r.jsx)("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500",children:"px"})," "]})," "]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-600",children:O[t[e].sizingType]}),"percentage"===t[e].sizingType?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-2 mt-1",children:[" ",d.map(s=>(0,r.jsxs)("button",{onClick:()=>m(e,"percentage",L(s.columns)),className:"text-xs p-2 rounded-md transition-colors ".concat(Math.round(L(s.columns))===Math.round(t[e].percentage)?"bg-blue-600 text-white font-semibold":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:[" ",s.label," "]},s.columns))," "]})," ",(0,r.jsxs)("div",{className:"mt-2",children:[" ",(0,r.jsx)("input",{type:"range",min:"1",max:"100",value:t[e].percentage,onChange:t=>m(e,"percentage",parseInt(t.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})," ",(0,r.jsxs)("div",{className:"text-center text-sm text-gray-600 mt-1",children:[Math.round(t[e].percentage),"% width"]})," "]})," "]}):(0,r.jsxs)("div",{className:"relative mt-1",children:[" ",(0,r.jsx)("input",{type:"number",placeholder:"e.g., ".concat("width"===t[e].sizingType?800:600),value:t[e][t[e].sizingType],onChange:s=>m(e,t[e].sizingType,parseFloat(s.target.value)),className:"w-full pl-3 pr-10 py-2 text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})," ",(0,r.jsx)("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500",children:"px"})," "]}),(0,r.jsxs)("div",{className:"flex space-x-2 mt-3 text-xs",children:["percentage"===t[e].sizingType||(0,r.jsx)("button",{onClick:()=>h(e,"percentage"),className:"flex-1 py-1 px-2 border rounded-md hover:bg-gray-100",children:"Set Percentage"}),"width"===t[e].sizingType||(0,r.jsx)("button",{onClick:()=>h(e,"width"),className:"flex-1 py-1 px-2 border rounded-md hover:bg-gray-100",children:"Set Width"}),"height"===t[e].sizingType||(0,r.jsx)("button",{onClick:()=>h(e,"height"),className:"flex-1 py-1 px-2 border rounded-md hover:bg-gray-100",children:"Set Height"})]})]})]})})]},e))}),(0,r.jsx)("div",{className:"flex justify-end items-center mt-4",children:(0,r.jsxs)(j,{disabled:!a,onClick:l,children:[(0,r.jsx)(q,{className:"w-4 h-4 mr-2"}),"Compress All"]})})]})};function T(e,t,s,r,a){return e.map(e=>e.id!==t.id?e:{...t,tasks:{...t.tasks,[s]:{...t.tasks[s]||{},[r]:a}}})}function W(e){let{locale:t}=e,[l,i]=(0,a.useState)("first-upload"),[n,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[x,p]=(0,a.useState)([]),u=(0,a.useRef)(null),g=(0,a.useRef)(null),b=(0,a.useRef)(null),[y,f]=(0,a.useState)({mobile:{enabled:!0,screenWidth:768,sizingType:"percentage",percentage:100,width:768,height:100},tablet:{enabled:!0,screenWidth:1200,sizingType:"percentage",percentage:50,width:600,height:100},desktop:{enabled:!0,screenWidth:2e3,sizingType:"percentage",percentage:33.33,width:666.66,height:100}}),j=function(){let[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{!async function(){try{let e=await s.e(616).then(s.bind(s,9616));t(()=>e.default)}catch(e){console.error("Failed to load '@yireen/squoosh-browser':",e)}}()},[]),null===e?null:function(t,s,r){if(!e)throw Error("Compressor class not loaded. Ensure '@yireen/squoosh-browser' is imported correctly.");return new e(t,function(e,t,s){if("webp"===e)return{preprocessorState:{rotate:{rotate:0}},processorState:{quantize:{enabled:!1,zx:0,maxNumColors:256,dither:1},resize:{enabled:!0,width:t,height:s,method:"lanczos3",fitMethod:"stretch",premultiply:!0,linearRGB:!0}},encoderState:{type:"webP",options:{quality:75,target_size:0,target_PSNR:0,method:4,sns_strength:50,filter_strength:60,filter_sharpness:0,filter_type:1,partitions:0,segments:4,pass:1,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:0,exact:0,image_hint:0,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:0,use_sharp_yuv:0}}};if("jpg"===e)return{preprocessorState:{rotate:{rotate:0}},processorState:{quantize:{enabled:!1,zx:0,maxNumColors:256,dither:1},resize:{enabled:!0,width:t,height:s,method:"lanczos3",fitMethod:"stretch",premultiply:!0,linearRGB:!0}},encoderState:{type:"mozJPEG",options:{quality:75,chroma_subsample:0,trellis_multipass:!1,trellis_opt_zero:!1,trellis_opt_table:!1,trellis_loops:1,quant_table:3,separate_chroma_quality:!1,baseline:!1,arithmetic:!1,progressive:!0,optimize_coding:!0,smoothing:0,color_space:3,auto_subsample:!0,chroma_quality:75}}};if("avif"===e)return{preprocessorState:{rotate:{rotate:0}},processorState:{quantize:{enabled:!1,zx:0,maxNumColors:256,dither:1},resize:{enabled:!0,width:t,height:s,method:"lanczos3",fitMethod:"stretch",premultiply:!0,linearRGB:!0}},encoderState:{type:"avif",options:{cqLevel:33,cqAlphaLevel:33,denoiseLevel:0,tileRowsLog2:0,tileColsLog2:0,speed:6,subsample:1,chromaDeltaQ:!1,sharpness:0,tune:0}}};throw Error("Unsupported format: ".concat(e))}(s,r.width,r.height)).process()}}();return(0,a.useEffect)(()=>{if(c)return;let e=x.find(e=>m(e));if(!e)return;let t=m(e);if(!t)throw Error("Inconsistent state: job is not finished but has no pending tasks");let[s,r]=t;if(!j)throw Error("Compressor function not available");d(!0),p(t=>T(t,e,s,r,{status:"running"})),j(e.originalFile,r,e.requestedDimensions[s]).then(t=>{p(a=>T(a,e,s,r,{status:"completed",result:t}))}).catch(t=>{p(a=>T(a,e,s,r,{status:"errored",error:t})),console.error("Compression error:",t)}).finally(()=>{d(!1)})},[x,c,j]),(0,r.jsxs)("div",{className:"bg-gray-50 min-h-screen font-sans",children:[(0,r.jsx)("header",{className:"bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-40",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("svg",{className:"h-8 w-8 text-blue-600",viewBox:"0 0 220 220",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M62,32 C76,110 122,80 135,198",stroke:"currentColor","stroke-width":"20","stroke-linecap":"round","stroke-linejoin":"round"}),(0,r.jsx)("ellipse",{cx:"153",cy:"41",rx:"22",ry:"15",transform:"rotate(135, 153, 41)",fill:"currentColor"})]}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"SlingSite"})]}),(0,r.jsxs)("nav",{className:"flex space-x-6 text-sm font-medium",children:[(0,r.jsx)("a",{href:"/".concat(t,"/image/"),className:"text-blue-600 border-b-2 border-blue-600 pb-1",children:"Image Compressor"}),(0,r.jsxs)("a",{href:"#",className:"text-gray-500 hover:text-gray-800 transition-colors duration-200 opacity-50 cursor-not-allowed",children:["Video Compressor ",(0,r.jsx)("span",{className:"text-xs bg-gray-200 text-gray-500 rounded-full px-2 py-0.5 ml-1",children:"Soon"})]})]})]})})}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"space-y-8",children:["first-upload"===l&&(0,r.jsxs)("div",{className:"text-center",children:[" ",(0,r.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl",children:"Optimize Your Web Images"})," ",(0,r.jsx)("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto",children:" Upload your images and get perfectly sized, next-gen formats for every device. Improve your site's speed and SEO. "})," "]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-8 items-start",children:[("first-upload"===l||"results+upload"===l)&&(0,r.jsx)("div",{ref:u,children:(0,r.jsx)(h,{onFilesAdded:e=>{var t;o(t=>[...t,...e]),i("settings"),null==(t=g.current)||t.scrollIntoView({behavior:"smooth",block:"start"})}})}),"settings"===l&&(0,r.jsx)("div",{ref:g,children:(0,r.jsx)(A,{handleExitSettings:()=>{var e;i("results+upload"),null==(e=u.current)||e.scrollIntoView({behavior:"smooth",block:"start"})},handleRemoveFile:e=>{if(1===n.length){var t;i("results+upload"),null==(t=u.current)||t.scrollIntoView({behavior:"smooth",block:"start"})}o(t=>{let s=[...t];return s.splice(e,1),s})},files:n,config:y,setConfig:f,readyToCompress:!!j,handleCompressClick:()=>{let e=Object.entries(y).filter(e=>{let[,t]=e;return t.enabled}).map(e=>{let[t]=e;return t});Promise.all(n.map(t=>new Promise((e,s)=>{let r=new Image;r.onload=()=>e({width:r.width,height:r.height}),r.onerror=s,r.src=URL.createObjectURL(t)}).then(s=>{let r={};e.forEach(e=>{let t,a=y[e];if("height"===a.sizingType)t={height:a.height,width:s.width*a.height/s.height};else{let e;if("percentage"===a.sizingType)e=a.screenWidth*(a.percentage/100);else if("width"===a.sizingType)e=a.width;else throw Error("Invalid sizing type");t={width:e,height:s.height*e/s.width}}t.width=Math.round(t.width),t.height=Math.round(t.height),r[e]=((e,t)=>{if(e.width<=t.width&&e.height<=t.height)return e;if(t.width<=e.width&&t.height<=e.height)return t;throw Error("Dimensions are not comparable")})(s,t)});let a=["jpg","webp","avif"],l={};return e.forEach(e=>{a.forEach(t=>{l[e]||(l[e]={}),l[e][t]={status:"waiting"}})}),{id:crypto.randomUUID(),originalFile:t,originalDimensions:s,requestedDimensions:r,requestedFormats:a,tasks:l}}))).then(e=>{var t;p(t=>[...t,...e]),o([]),i("results+upload"),null==(t=b.current)||t.scrollIntoView({behavior:"smooth",block:"start"})})}})}),x.length>0&&(0,r.jsx)("div",{ref:b,children:(0,r.jsx)(C,{jobs:x,handleRemoveJob:e=>{p(t=>{let s=[...t];return s.splice(e,1),s})}})})]})]})}),(0,r.jsx)("style",{children:".toggle-checkbox:checked { right: 0; border-color: #2563eb; } .toggle-checkbox:checked + .toggle-label { background-color: #2563eb; }"})]})}},6121:(e,t,s)=>{Promise.resolve().then(s.bind(s,2170))}},e=>{e.O(0,[441,964,358],()=>e(e.s=6121)),_N_E=e.O()}]);